"use strict";function startGame(){1===isPlaying&&removeCards(),removeClass(".control-panel__button-new-game","bounce"),removeClass(".control-panel__button-new-game","infinite"),points=0,document.querySelector(".control-panel__points").textContent=points,document.querySelector(".control-panel__time").textContent=time,document.querySelector(".control-panel__highscore").textContent=highscore,document.querySelector(".end-box").style.display="none",document.querySelector(".game-panel__back-img").style.display="none",document.querySelector(".control-panel__new-highscore").style.display="none",setPointerEvents("body","auto"),countdown(".control-panel__time",1,0),newGame()}function newGame(){randomCardsId(randomId),fillCardsArr(cards),addCards(cards),leftCards=numbersOfCards+numbersOfSpecial,isPlaying=1}function randomCardsId(e){for(var t=0;t<numbersOfTotal;t++)photoNumber++,t<numbersOfTotal/2-.5?e.push(photoNumber):t==numbersOfTotal/2-.5?(photoNumber=0,e.push(photoNumber)):t>numbersOfTotal/2-.5&&e.push(photoNumber);for(var n=e.length;n>1;n--){var a=Math.floor(Math.random()*n),o=e[a];e[a]=e[n-1],e[n-1]=o}}function fillCardsArr(e){for(var t=0;t<numbersOfTotal;t++)e.push(new Card(t,"card-"+randomId[t]))}function addCards(e){var t=void 0,n=void 0;e.forEach(function(e){var a=e.front,o=e.id;t='<li><img src="../cats-memory/images/card-back.jpeg" class="game-panel__card-%id% animated" onclick="changeSide(this, \''+a+"', '"+o+"')\"></li>",n=t.replace("%id%",o),document.querySelector(".game-panel__cards").insertAdjacentHTML("beforeend",n)})}function changeSide(e,t,n){var a=void 0;addClass(".game-panel__card-"+cards[n].id,"flipInY"),sound=new Audio("../cats-memory/wav/flip.wav"),sound.play(),"0"===cards[n].active&&activeCards.length<maxNumberOfActives?(e.src="../cats-memory/images/"+t+".jpeg",cards[n].active="1",activeCards.push(cards[n]),2==activeCards.length&&checkPairs()):"1"===cards[n].active&&(e.src="../cats-memory/images/card-back.jpeg",cards[n].active="0",a=activeCards.indexOf(cards[n]),activeCards.splice(a,1)),"card-7"==t&&(setPointerEvents("body","none"),document.querySelector(".control-panel__bonus-time").style.display="block",window.setTimeout(function(){add30sec(),sound=new Audio("../cats-memory/wav/bonus.wav"),sound.play(),removeClass(".game-panel__card-"+cards[n].id,"flipInY"),addClass(".game-panel__card-"+cards[n].id,"bounceOut"),document.querySelector(".game-panel__card-"+cards[n].id).style.opacity=0,cards[n].active="0",leftCards-=1,a=activeCards.indexOf(cards[n]),activeCards.splice(a,1),setPointerEvents("body","auto"),document.querySelector(".control-panel__bonus-time").style.display="none",checkEnd()},1e3))}function checkPairs(){activeCards[0].front==activeCards[1].front?(setPointerEvents("body","none"),window.setTimeout(function(){removeClass(".game-panel__card-"+cards[activeCards[0].id].id,"flipInY"),removeClass(".game-panel__card-"+cards[activeCards[1].id].id,"flipInY"),addClass(".game-panel__card-"+cards[activeCards[0].id].id,"bounceOut"),addClass(".game-panel__card-"+cards[activeCards[1].id].id,"bounceOut"),window.setTimeout(function(){document.querySelector(".game-panel__card-"+activeCards[0].id).style.opacity=0,document.querySelector(".game-panel__card-"+activeCards[1].id).style.opacity=0,cards[activeCards[0].id].active="0",cards[activeCards[1].id].active="0",sound=new Audio("../cats-memory/wav/pair.wav"),sound.play(),leftCards-=2,clearActiveCards(),addPoints(),checkEnd(),setPointerEvents("body","auto")},800)},1e3)):(setPointerEvents("body","none"),removeClass(".game-panel__card-"+cards[activeCards[0].id].id,"flipInY"),removeClass(".game-panel__card-"+cards[activeCards[1].id].id,"flipInY"),addClass(".game-panel__card-"+cards[activeCards[0].id].id,"shake"),addClass(".game-panel__card-"+cards[activeCards[1].id].id,"shake"),window.setTimeout(function(){"card-7"!==activeCards[1].front&&(sound=new Audio("../cats-memory/wav/no-pair.wav"),sound.play()),document.querySelector(".game-panel__card-"+activeCards[0].id).src="../cats-memory/images/card-back.jpeg",document.querySelector(".game-panel__card-"+activeCards[1].id).src="../cats-memory/images/card-back.jpeg",removeClass(".game-panel__card-"+cards[activeCards[0].id].id,"shake"),removeClass(".game-panel__card-"+cards[activeCards[1].id].id,"shake"),addClass(".game-panel__card-"+cards[activeCards[0].id].id,"flipInY"),addClass(".game-panel__card-"+cards[activeCards[1].id].id,"flipInY"),cards[activeCards[0].id].active="0",cards[activeCards[1].id].active="0",clearActiveCards(),setPointerEvents("body","auto")},1e3))}function clearActiveCards(){activeCards=[]}function addPoints(){points+=25,document.querySelector(".control-panel__points").textContent=points,addClass(".control-panel__points","tada"),window.setTimeout(function(){removeClass(".control-panel__points","tada")},500)}function endGame(){if(window.clearInterval(iv),document.querySelector(".end-box").style.display="inline-block",removeCards(),0===leftCards){timeLeft=document.querySelector(".control-panel__time").textContent;var e=timeLeft.split(":"),t=60*+e[0]+ +e[1];score=points+t,endTime=t,countdownPoints(),countupPoints(),document.querySelector(".end-box__button-try-again").style.display="none",score>highscore&&(highscore=score,sound=new Audio("../cats-memory/wav/new-highscore.wav"),sound.play(),document.querySelector(".control-panel__new-highscore").style.display="inline-block",document.querySelector(".control-panel__highscore").textContent=highscore)}else document.querySelector(".end-box__end-text").innerHTML="Time's up!",document.querySelector(".end-box__button-try-again").style.display="inline-block"}function checkEnd(){0===leftCards&&endGame()}function closeEndBox(){document.querySelector(".end-box").style.display="none"}function add30sec(){window.clearInterval(iv),timeLeft=document.querySelector(".control-panel__time").textContent;var e=timeLeft.split(":");countdown(".control-panel__time",0,60*+e[0]+ +e[1]+30)}function setPointerEvents(e,t){document.querySelector(e).style.pointerEvents=t}function addClass(e,t){document.querySelector(e).classList.add(t)}function removeClass(e,t){document.querySelector(e).classList.remove(t)}function countdown(e,t,n){function a(e){return e<=9?"0"+e:e}function o(){msLeft=endTime-+new Date,msLeft<1e3?(element.innerHTML="0:00",endGame()):(time=new Date(msLeft),hours=time.getUTCHours(),mins=time.getUTCMinutes(),element.innerHTML=(hours?hours+":"+a(mins):mins)+":"+a(time.getUTCSeconds()),iv=window.setTimeout(o,time.getUTCMilliseconds()+500))}element=document.querySelector(e),endTime=+new Date+1e3*(60*t+n)+500,o()}function tryAgain(){document.querySelector(".end-box").style.display="none",startGame()}function removeCards(){cards=[],activeCards=[],randomId=[],photoNumber=-1,isPlaying=0;var e=document.querySelector(".game-panel__cards").innerHTML,t=e.replace(e,"");document.querySelector(".game-panel__cards").innerHTML=t}function countdownPoints(){endTime--,document.querySelector(".control-panel__time").innerHTML=endTime>=10?"0:"+endTime:"0:0"+endTime,0!==endTime&&setTimeout(countdownPoints,50)}function countupPoints(){points++,document.querySelector(".end-box__end-score").innerHTML=points,points>=score||setTimeout(countupPoints,50)}var document,window,Audio,Card=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"card-back",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0";this.id=e,this.back=n,this.front=t,this.active=a},numbersOfCards=14,numbersOfSpecial=1,numbersOfTotal=numbersOfCards+numbersOfSpecial,leftCards=void 0,cards=[],activeCards=[],randomId=[],photoNumber=-1,maxNumberOfActives=2,points=void 0,timeLeft=void 0,endTime=void 0,score=void 0,highscore=0,sound=void 0,isPlaying=0,element=void 0,hours=void 0,mins=void 0,msLeft=void 0,iv=void 0,time=void 0;setPointerEvents("body","none"),setPointerEvents(".control-panel__button-new-game","auto");