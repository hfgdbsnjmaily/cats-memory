"use strict";function startGame(){1===isPlaying&&removeCards(),removeClass(".control-panel__button-new-game","bounce"),removeClass(".control-panel__button-new-game","infinite"),points=0,document.querySelector(".control-panel__points").textContent=points,document.querySelector(".control-panel__time").textContent=time,document.querySelector(".control-panel__highscore").textContent=highscore,document.querySelector(".end-box").style.display="none",document.querySelector(".game-panel__back-img").style.display="none",document.querySelector(".control-panel__new-highscore").style.display="none",setPointerEvents("body","auto"),countdown(".control-panel__time",1,0),newGame()}function newGame(){randomCardsId(randomId),fillCardsArr(cards),addCards(cards),leftCards=numbersOfCards+numbersOfSpecial,isPlaying=1}function randomCardsId(e){for(var n=0;n<numbersOfTotal;n++)photoNumber++,n<numbersOfTotal/2-.5?e.push(photoNumber):n==numbersOfTotal/2-.5?(photoNumber=0,e.push(photoNumber)):n>numbersOfTotal/2-.5&&e.push(photoNumber);for(var t=e.length;t>1;t--){var a=Math.floor(Math.random()*t),o=e[a];e[a]=e[t-1],e[t-1]=o}}function fillCardsArr(e){for(var n=0;n<numbersOfTotal;n++)e.push(new Card(n,"card-"+randomId[n]))}function addCards(e){var n=void 0,t=void 0;e.forEach(function(e){var a=e.front,o=e.id;n='<li><img src="../images/card-back.jpeg" class="game-panel__card-%id% animated" onclick="changeSide(this, \''+a+"', '"+o+"')\"></li>",t=n.replace("%id%",o),document.querySelector(".game-panel__cards").insertAdjacentHTML("beforeend",t)})}function changeSide(e,n,t){var a=void 0;addClass(".game-panel__card-"+cards[t].id,"flipInY"),sound=new Audio("../wav/flip.wav"),sound.play(),"0"===cards[t].active&&activeCards.length<maxNumberOfActives?(e.src="../images/"+n+".jpeg",cards[t].active="1",activeCards.push(cards[t]),2==activeCards.length&&checkPairs()):"1"===cards[t].active&&(e.src="../images/card-back.jpeg",cards[t].active="0",a=activeCards.indexOf(cards[t]),activeCards.splice(a,1)),"card-7"==n&&(setPointerEvents("body","none"),document.querySelector(".control-panel__bonus-time").style.display="block",window.setTimeout(function(){add30sec(),sound=new Audio("../wav/bonus.wav"),sound.play(),removeClass(".game-panel__card-"+cards[t].id,"flipInY"),addClass(".game-panel__card-"+cards[t].id,"bounceOut"),document.querySelector(".game-panel__card-"+cards[t].id).style.opacity=0,cards[t].active="0",leftCards-=1,a=activeCards.indexOf(cards[t]),activeCards.splice(a,1),setPointerEvents("body","auto"),document.querySelector(".control-panel__bonus-time").style.display="none",checkEnd()},1e3))}function checkPairs(){activeCards[0].front==activeCards[1].front?(setPointerEvents("body","none"),window.setTimeout(function(){removeClass(".game-panel__card-"+cards[activeCards[0].id].id,"flipInY"),removeClass(".game-panel__card-"+cards[activeCards[1].id].id,"flipInY"),addClass(".game-panel__card-"+cards[activeCards[0].id].id,"bounceOut"),addClass(".game-panel__card-"+cards[activeCards[1].id].id,"bounceOut"),window.setTimeout(function(){document.querySelector(".game-panel__card-"+activeCards[0].id).style.opacity=0,document.querySelector(".game-panel__card-"+activeCards[1].id).style.opacity=0,cards[activeCards[0].id].active="0",cards[activeCards[1].id].active="0",sound=new Audio("../wav/pair.wav"),sound.play(),leftCards-=2,clearActiveCards(),addPoints(),checkEnd(),setPointerEvents("body","auto")},800)},1e3)):(setPointerEvents("body","none"),removeClass(".game-panel__card-"+cards[activeCards[0].id].id,"flipInY"),removeClass(".game-panel__card-"+cards[activeCards[1].id].id,"flipInY"),addClass(".game-panel__card-"+cards[activeCards[0].id].id,"shake"),addClass(".game-panel__card-"+cards[activeCards[1].id].id,"shake"),window.setTimeout(function(){"card-7"!==activeCards[1].front&&(sound=new Audio("../wav/no-pair.wav"),sound.play()),document.querySelector(".game-panel__card-"+activeCards[0].id).src="../images/card-back.jpeg",document.querySelector(".game-panel__card-"+activeCards[1].id).src="../images/card-back.jpeg",removeClass(".game-panel__card-"+cards[activeCards[0].id].id,"shake"),removeClass(".game-panel__card-"+cards[activeCards[1].id].id,"shake"),addClass(".game-panel__card-"+cards[activeCards[0].id].id,"flipInY"),addClass(".game-panel__card-"+cards[activeCards[1].id].id,"flipInY"),cards[activeCards[0].id].active="0",cards[activeCards[1].id].active="0",clearActiveCards(),setPointerEvents("body","auto")},1e3))}function clearActiveCards(){activeCards=[]}function addPoints(){points+=25,document.querySelector(".control-panel__points").textContent=points,addClass(".control-panel__points","tada"),window.setTimeout(function(){removeClass(".control-panel__points","tada")},500)}function endGame(){if(window.clearInterval(iv),document.querySelector(".end-box").style.display="inline-block",removeCards(),0===leftCards){timeLeft=document.querySelector(".control-panel__time").textContent;var e=timeLeft.split(":"),n=60*+e[0]+ +e[1];score=points+n,endTime=n,countdownPoints(),countupPoints(),document.querySelector(".end-box__button-try-again").style.display="none",score>highscore&&(highscore=score,sound=new Audio("../wav/new-highscore.wav"),sound.play(),document.querySelector(".control-panel__new-highscore").style.display="inline-block",document.querySelector(".control-panel__highscore").textContent=highscore)}else document.querySelector(".end-box__end-text").innerHTML="Time's up!",document.querySelector(".end-box__button-try-again").style.display="inline-block"}function checkEnd(){0===leftCards&&endGame()}function closeEndBox(){document.querySelector(".end-box").style.display="none"}function add30sec(){window.clearInterval(iv),timeLeft=document.querySelector(".control-panel__time").textContent;var e=timeLeft.split(":");countdown(".control-panel__time",0,60*+e[0]+ +e[1]+30)}function setPointerEvents(e,n){document.querySelector(e).style.pointerEvents=n}function addClass(e,n){document.querySelector(e).classList.add(n)}function removeClass(e,n){document.querySelector(e).classList.remove(n)}function countdown(e,n,t){function a(e){return e<=9?"0"+e:e}function o(){msLeft=endTime-+new Date,msLeft<1e3?(element.innerHTML="0:00",endGame()):(time=new Date(msLeft),hours=time.getUTCHours(),mins=time.getUTCMinutes(),element.innerHTML=(hours?hours+":"+a(mins):mins)+":"+a(time.getUTCSeconds()),iv=window.setTimeout(o,time.getUTCMilliseconds()+500))}element=document.querySelector(e),endTime=+new Date+1e3*(60*n+t)+500,o()}function tryAgain(){document.querySelector(".end-box").style.display="none",startGame()}function removeCards(){cards=[],activeCards=[],randomId=[],photoNumber=-1,isPlaying=0;var e=document.querySelector(".game-panel__cards").innerHTML,n=e.replace(e,"");document.querySelector(".game-panel__cards").innerHTML=n}function countdownPoints(){endTime--,document.querySelector(".control-panel__time").innerHTML=endTime>=10?"0:"+endTime:"0:0"+endTime,0!==endTime&&setTimeout(countdownPoints,50)}function countupPoints(){points++,document.querySelector(".end-box__end-score").innerHTML=points,points>=score||setTimeout(countupPoints,50)}var document,window,Audio,Card=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"card-back",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0";this.id=e,this.back=t,this.front=n,this.active=a},numbersOfCards=14,numbersOfSpecial=1,numbersOfTotal=numbersOfCards+numbersOfSpecial,leftCards=void 0,cards=[],activeCards=[],randomId=[],photoNumber=-1,maxNumberOfActives=2,points=void 0,timeLeft=void 0,endTime=void 0,score=void 0,highscore=0,sound=void 0,isPlaying=0,element=void 0,hours=void 0,mins=void 0,msLeft=void 0,iv=void 0,time=void 0;setPointerEvents("body","none"),setPointerEvents(".control-panel__button-new-game","auto");